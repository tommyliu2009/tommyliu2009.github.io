<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太順昌不動產 - 首頁</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .hero-bg {
            background-image: linear-gradient(to right, rgba(20, 20, 20, 0.7), rgba(80, 80, 80, 0.6)), url('https://placehold.co/1600x900/9ca3af/ffffff?text=Modern+Real+Estate');
            background-size: cover;
            background-position: center;
        }
        /* Chatbot Widget Styles */
        #chat-widget-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
        #chat-toggle-btn {
            background-color: #1f2937; /* gray-800 */
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        #chat-toggle-btn:hover {
            background-color: #374151; /* gray-700 */
            transform: scale(1.1);
        }
        #chat-window-container {
            width: 100%;
            max-width: 400px;
            height: 550px;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            display: none; /* Initially hidden */
            flex-direction: column;
            margin-bottom: 1rem;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(20px);
            opacity: 0;
        }
        #chat-window-container.active {
            display: flex;
            transform: translateY(0);
            opacity: 1;
        }
        #chat-window::-webkit-scrollbar { width: 6px; }
        #chat-window::-webkit-scrollbar-track { background: #f1f1f1; }
        #chat-window::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
        #chat-window::-webkit-scrollbar-thumb:hover { background: #555; }
        .chat-bubble {
            opacity: 0;
            transform: translateY(20px);
            animation: pop-in 0.3s forwards ease-out;
        }
        @keyframes pop-in {
            to { opacity: 1; transform: translateY(0); }
        }
        .confirmation-summary {
            border-left: 4px solid #4b5563;
            padding-left: 1rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-800 flex items-center">
                <i class="fas fa-building mr-2"></i>
                太順昌不動產
            </a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#services" class="text-gray-600 hover:text-gray-900 transition">服務項目</a>
                <a href="#about" class="text-gray-600 hover:text-gray-900 transition">關於我們</a>
                <a href="#contact" class="text-gray-600 hover:text-gray-900 transition">聯絡資訊</a>
                <a href="#" id="nav-chat-btn" class="bg-gray-700 text-white px-4 py-2 rounded-full hover:bg-gray-800 transition">
                    <i class="fas fa-comments mr-2"></i>線上客服
                </a>
            </div>
            <button id="mobile-menu-btn" class="md:hidden focus:outline-none">
                <i class="fas fa-bars text-2xl text-gray-800"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#services" class="block py-2 text-gray-600 hover:text-gray-900">服務項目</a>
            <a href="#about" class="block py-2 text-gray-600 hover:text-gray-900">關於我們</a>
            <a href="#contact" class="block py-2 text-gray-600 hover:text-gray-900">聯絡資訊</a>
            <a href="#" id="mobile-nav-chat-btn" class="block py-2 text-gray-800 font-semibold">線上客服</a>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero-bg text-white">
            <div class="container mx-auto px-6 py-24 md:py-32 text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-4">專業、誠信、可靠的不動產服務</h1>
                <p class="text-lg md:text-xl mb-8 max-w-3xl mx-auto">從不動產活化、買賣租賃到投資規劃，太順昌為您提供全方位解決方案。</p>
                <a href="#contact" class="bg-white text-gray-800 font-bold py-3 px-8 rounded-full hover:bg-gray-200 transition text-lg">立即諮詢</a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800">我們的服務</h2>
                    <p class="text-gray-600 mt-2">為您活化資產，創造價值</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Service Item -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg text-center hover:shadow-xl hover:-translate-y-2 transition-all">
                        <div class="text-gray-700 mb-4"><i class="fas fa-lightbulb fa-3x"></i></div>
                        <h3 class="text-xl font-bold mb-2">不動產活化</h3>
                        <p class="text-gray-600">提供專業不動產活化方案，提升資產價值。</p>
                    </div>
                    <!-- Service Item -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg text-center hover:shadow-xl hover:-translate-y-2 transition-all">
                        <div class="text-gray-700 mb-4"><i class="fas fa-handshake fa-3x"></i></div>
                        <h3 class="text-xl font-bold mb-2">買賣租賃</h3>
                        <p class="text-gray-600">安全、迅速地辦理不動產買賣、租賃事宜。</p>
                    </div>
                    <!-- Service Item -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-lg text-center hover:shadow-xl hover:-translate-y-2 transition-all">
                        <div class="text-gray-700 mb-4"><i class="fas fa-chart-line fa-3x"></i></div>
                        <h3 class="text-xl font-bold mb-2">投資規劃</h3>
                        <p class="text-gray-600">協助客戶進行不動產投資分析與規劃。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 bg-gray-100">
            <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/3 text-center">
                    <img src="https://placehold.co/300x300/e2e8f0/334155?text=劉靜渡" alt="劉靜渡" class="rounded-full shadow-xl mx-auto w-48 h-48 md:w-64 md:h-64 object-cover">
                </div>
                <div class="md:w-2/3">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">關於負責人 劉靜渡</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        劉靜渡先生擁有多年豐富的實務經驗，秉持著「專業、誠信、效率」的服務精神，親自為每一位客戶把關。無論案件大小，我們都以最嚴謹的態度處理，確保您的不動產交易安全無虞，權益獲得最大保障。
                    </p>
                    <p class="text-gray-600 leading-relaxed">
                        太順昌不動產深耕苗栗地區，熟悉各類不動產活化與買賣流程，是您值得信賴的夥伴。
                    </p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800">聯絡我們</h2>
                    <p class="text-gray-600 mt-2">我們期待為您服務，歡迎隨時與我們聯繫</p>
                </div>
                <div class="flex flex-wrap -mx-4">
                    <div class="w-full lg:w-1/2 px-4 mb-8 lg:mb-0">
                        <div class="bg-gray-50 p-8 rounded-lg shadow-lg h-full">
                            <h3 class="text-2xl font-bold text-gray-800 mb-6">聯絡資訊</h3>
                            <div class="space-y-4 text-gray-700">
                                <p><i class="fas fa-map-marker-alt w-6 text-gray-700 mr-2"></i><strong>地址:</strong> 苗栗縣苗栗巿中山路384號</p>
                                <p><i class="fas fa-mobile-alt w-6 text-gray-700 mr-2"></i><strong>手機:</strong> 0939-988-052</p>
                            </div>
                        </div>
                    </div>
                    <div class="w-full lg:w-1/2 px-4">
                        <div class="rounded-lg shadow-lg overflow-hidden h-full">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3629.826453237813!2d120.8182630758686!3d24.52645895918428!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3468560e00000001%3A0x46f491094b3183dc!2zMzYw6IuX5qCX57ij6IuX5qCX5biC5Lit5bGx6LevMzg06Jmf!5e0!3m2!1szh-TW!2stw!4v1690353000000!5m2!1szh-TW!2stw" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 太順昌不動產. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- AI Chatbot Widget -->
    <div id="chat-widget-container">
        <!-- Chat Window -->
        <div id="chat-window-container" class="bg-white">
            <!-- Chat Header -->
            <header class="bg-gray-800 text-white p-4 flex items-center shadow-md flex-shrink-0">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3">
                    <i class="fas fa-building text-xl text-gray-800"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold">太順助理</h1>
                    <p class="text-xs opacity-80">線上服務中</p>
                </div>
                <button id="close-chat-btn" class="ml-auto text-white hover:text-gray-300">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </header>
            <!-- Chat Messages -->
            <div id="chat-window" class="p-4 md:p-6 flex-grow overflow-y-auto bg-gray-50">
                <!-- Chat messages will be dynamically inserted here -->
            </div>
            <!-- Chat Input -->
            <footer class="p-4 bg-white border-t border-gray-200 flex-shrink-0">
                <div class="flex items-center">
                    <input type="text" id="user-input" placeholder="請在這裡輸入訊息..." class="flex-grow px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-500 transition">
                    <button id="send-btn" class="ml-3 bg-gray-700 text-white w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-transform transform hover:scale-110">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </footer>
        </div>
        <!-- Toggle Button -->
        <button id="chat-toggle-btn">
            <i id="chat-icon" class="fas fa-comments fa-2x"></i>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Mobile Menu Logic ---
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // --- Chatbot Logic ---
            const chatWindowContainer = document.getElementById('chat-window-container');
            const chatToggleBtn = document.getElementById('chat-toggle-btn');
            const closeChatBtn = document.getElementById('close-chat-btn');
            const chatIcon = document.getElementById('chat-icon');
            const navChatBtn = document.getElementById('nav-chat-btn');
            const mobileNavChatBtn = document.getElementById('mobile-nav-chat-btn');

            const chatWindow = document.getElementById('chat-window');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            
            let isChatOpen = false;

            function toggleChatWindow() {
                isChatOpen = !isChatOpen;
                if (isChatOpen) {
                    chatWindowContainer.classList.add('active');
                    chatIcon.classList.remove('fa-comments');
                    chatIcon.classList.add('fa-times');
                    if(chatWindow.children.length === 0) {
                        initChat();
                    }
                } else {
                    chatWindowContainer.classList.remove('active');
                    chatIcon.classList.remove('fa-times');
                    chatIcon.classList.add('fa-comments');
                }
            }

            chatToggleBtn.addEventListener('click', toggleChatWindow);
            closeChatBtn.addEventListener('click', toggleChatWindow);
            navChatBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (!isChatOpen) toggleChatWindow();
            });
            mobileNavChatBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (!isChatOpen) toggleChatWindow();
                mobileMenu.classList.add('hidden'); // Close mobile menu
            });

            // --- Chatbot Core Functionality ---
            const states = {
                AWAITING_SERVICE_CHOICE: 'AWAITING_SERVICE_CHOICE',
                COLLECTING_INFO: 'COLLECTING_INFO',
                AWAITING_CONFIRMATION: 'AWAITING_CONFIRMATION',
                FINISHED: 'FINISHED'
            };
            
            const serviceMap = {
                '1': '不動產活化', '活化': '不動產活化',
                '2': '買賣租賃', '買賣': '買賣租賃', '租賃': '買賣租賃',
                '3': '投資規劃', '投資': '投資規劃',
                '4': '其他事項', '其他': '其他事項'
            };

            let currentState = states.AWAITING_SERVICE_CHOICE;
            let userData = {};
            let collectingStep = 0;
            const collectionSteps = [
                { key: 'name', question: '請教您的大名或稱呼？' },
                { key: 'phone', question: '謝謝您！那方便提供您的聯絡電話嗎？' },
                { key: 'location', question: '了解。請問您想辦理的物件座落在哪個區域呢？ (例如：苗栗市)' },
                { key: 'details', question: '最後，請簡要說明您的情況。' },
            ];
            
            function resetChat() {
                currentState = states.AWAITING_SERVICE_CHOICE;
                userData = {};
                collectingStep = 0;
                userInput.disabled = false;
                sendBtn.disabled = false;
                sendBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                userInput.placeholder = "請在這裡輸入訊息...";
                initChat();
            }

            function initChat() {
                chatWindow.innerHTML = ''; // Clear chat window on init
                addBotMessage("您好！歡迎來到**太順昌不動產**，我是您的**太順助理**。很高興為您服務。");
                setTimeout(() => {
                    const serviceMenu = `
                        為了能更準確地協助您，請問您需要哪一方面的服務呢？請參考我們的服務項目，您可以直接輸入**編號**或**服務名稱**。
                        <br><br>
                        **【服務選單】**<br>
                        **1. 不動產活化**<br>
                        **2. 買賣租賃**<br>
                        **3. 投資規劃**<br>
                        **4. 其他事項**
                    `;
                    addBotMessage(serviceMenu);
                }, 1000);
            }

            function handleUserInput() {
                const message = userInput.value.trim();
                if (!message) return;

                addUserMessage(message);
                userInput.value = '';

                if (currentState === states.FINISHED) {
                    addBotMessage("感謝您的留言，我們的專員將會盡快與您聯繫。若需重新對話，請點擊右下角圖示。");
                    return;
                }

                setTimeout(() => processMessage(message), 500);
            }
            
            function processMessage(message) {
                if (currentState === states.AWAITING_SERVICE_CHOICE) {
                    let chosenService = null;
                    for (const key in serviceMap) {
                        if (message.includes(key)) {
                            chosenService = serviceMap[key];
                            break;
                        }
                    }

                    if (chosenService) {
                        userData['service'] = chosenService;
                        currentState = states.COLLECTING_INFO;
                        addBotMessage(`好的，關於**${chosenService}**，為了讓專員能更準確地評估，我需要請教您幾個問題。`);
                        setTimeout(askNextQuestion, 800);
                    } else {
                        addBotMessage("抱歉，我不太明白您的意思。您可以直接輸入服務選單上的編號（1-4）或關鍵字喔。");
                    }
                } else if (currentState === states.COLLECTING_INFO) {
                    const currentStep = collectionSteps[collectingStep];
                    userData[currentStep.key] = message;
                    collectingStep++;
                    
                    if (collectingStep < collectionSteps.length) {
                        askNextQuestion();
                    } else {
                        currentState = states.AWAITING_CONFIRMATION;
                        showConfirmation();
                    }
                } else if (currentState === states.AWAITING_CONFIRMATION) {
                    if (message.trim() === '1') {
                        currentState = states.FINISHED;
                        showFinalSummary();
                    } else if (message.trim() === '2') {
                        addBotMessage("好的，那我們重新開始。");
                        setTimeout(resetChat, 1000);
                    } else {
                        addBotMessage("請輸入 **1** (正確) 或 **2** (修改) 來繼續。");
                    }
                }
            }
            
            function askNextQuestion() {
                const question = collectionSteps[collectingStep].question;
                addBotMessage(question);
            }

            function showConfirmation() {
                addBotMessage("感謝您提供資訊！請確認以下內容是否正確：");
                setTimeout(() => {
                    const confirmationMessage = `
                        <div class="confirmation-summary">
                            <p><strong>服務項目:</strong> ${userData.service}</p>
                            <p><strong>您的稱呼:</strong> ${userData.name}</p>
                            <p><strong>聯絡電話:</strong> ${userData.phone}</p>
                            <p><strong>物件區域:</strong> ${userData.location}</p>
                            <p><strong>諮詢事項:</strong> ${userData.details}</p>
                        </div>
                        <br>如果資訊正確，請回覆 **1**。<br>如果需要修改，請回覆 **2**。
                    `;
                    addBotMessage(confirmationMessage);
                }, 800);
            }

            function showFinalSummary() {
                addBotMessage("好的，資訊已確認！");
                setTimeout(() => {
                    const summary = `
                        我已將您的訊息成功轉達給**劉靜渡先生**，他將在上班時間盡快親自與您聯繫，請您稍候。
                        <br><br>
                        若有任何即時問題，也歡迎您撥打我們的服務專線：0939-988-052。
                        <br><br>
                        太順昌不動產，期待為您服務！
                    `;
                    addBotMessage(summary);
                    userInput.placeholder = "對話已結束。";
                    userInput.disabled = true;
                    sendBtn.disabled = true;
                    sendBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
                }, 1000);
            }

            function addBotMessage(message) {
                message = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                const messageElement = document.createElement('div');
                messageElement.classList.add('flex', 'mb-4', 'chat-bubble');
                messageElement.innerHTML = `
                    <div class="w-8 h-8 bg-gray-800 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 text-sm">助</div>
                    <div class="ml-3 bg-gray-200 p-3 rounded-lg max-w-xs">
                        <div class="text-sm text-gray-800">${message}</div>
                    </div>
                `;
                chatWindow.appendChild(messageElement);
                scrollToBottom();
            }

            function addUserMessage(message) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('flex', 'justify-end', 'mb-4', 'chat-bubble');
                messageElement.innerHTML = `
                    <div class="mr-3 bg-gray-600 text-white p-3 rounded-lg max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold flex-shrink-0 text-sm">您</div>
                `;
                chatWindow.appendChild(messageElement);
                scrollToBottom();
            }

            function scrollToBottom() {
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }

            sendBtn.addEventListener('click', handleUserInput);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleUserInput();
                }
            });
        });
    </script>
</body>
</html>
